<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>End-to-End Open-source Collaboration Guidance - 2&nbsp; Using open-source</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./releasing.html" rel="next">
<link href="./why.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./using.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Using open-source</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./assets/phuse.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">End-to-End Open-source Collaboration Guidance</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/phuse-org/E2E-OS-Guidance" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Download" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./End-to-End-Open-source-Collaboration-Guidance.pdf">
              <i class="bi bi-bi-file-pdf pe-1"></i>
            Download PDF
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./End-to-End-Open-source-Collaboration-Guidance.docx">
              <i class="bi bi-bi-file-word pe-1"></i>
            Download Docx
            </a>
          </li>
      </ul>
    </div>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-1" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-1">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Guidance scope and purpose</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./definitions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Definitions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./why.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Open source: the what and why</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./using.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Using open-source</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./releasing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Releasing open source</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./contributors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Contributors</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#open-source-health" id="toc-open-source-health" class="nav-link active" data-scroll-target="#open-source-health"><span class="header-section-number">2.1</span> Open-source health</a></li>
  <li><a href="#understanding-an-open-source-project" id="toc-understanding-an-open-source-project" class="nav-link" data-scroll-target="#understanding-an-open-source-project"><span class="header-section-number">2.2</span> Understanding an open-source project</a>
  <ul class="collapse">
  <li><a href="#the-community-behind-a-project" id="toc-the-community-behind-a-project" class="nav-link" data-scroll-target="#the-community-behind-a-project"><span class="header-section-number">2.2.1</span> The community behind a project</a></li>
  </ul></li>
  <li><a href="#finding-open-source-projects" id="toc-finding-open-source-projects" class="nav-link" data-scroll-target="#finding-open-source-projects"><span class="header-section-number">2.3</span> Finding open-source projects</a></li>
  <li><a href="#balancing-extending-vs-creating" id="toc-balancing-extending-vs-creating" class="nav-link" data-scroll-target="#balancing-extending-vs-creating"><span class="header-section-number">2.4</span> Balancing extending vs creating</a></li>
  <li><a href="#understanding-the-risks-of-using-open-source" id="toc-understanding-the-risks-of-using-open-source" class="nav-link" data-scroll-target="#understanding-the-risks-of-using-open-source"><span class="header-section-number">2.5</span> Understanding the risks of using open-source</a>
  <ul class="collapse">
  <li><a href="#tools-that-help-document-risk-in-r-packages" id="toc-tools-that-help-document-risk-in-r-packages" class="nav-link" data-scroll-target="#tools-that-help-document-risk-in-r-packages"><span class="header-section-number">2.5.1</span> Tools that help document risk in R packages</a></li>
  </ul></li>
  <li><a href="#the-impact-of-different-licences" id="toc-the-impact-of-different-licences" class="nav-link" data-scroll-target="#the-impact-of-different-licences"><span class="header-section-number">2.6</span> The impact of different licences</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Using open-source</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>The following section is a non-exhaustive discussion of topics relevant when using open-source data science projects.</p>
<section id="open-source-health" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="open-source-health"><span class="header-section-number">2.1</span> Open-source health</h2>
<p>The communities that maintain and build open-source packages are diverse, and there are no set conventions on how they are maintained, resourced, and governed. There are no universal metrics to determine if an OS project is <em>‘healthy’</em>. Health <em>indicators</em> such as project activity, apparent use, clear governance, and active maintainers are just <em>that</em>.</p>
<p>A project with no activity for years, for example, might be simply be considered ‘done’ and not necessarily because the project has been abandoned/superseded. ‘Done’ in the sense of being stable and feature complete perhaps due to a small and well-defined scope.</p>
</section>
<section id="understanding-an-open-source-project" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="understanding-an-open-source-project"><span class="header-section-number">2.2</span> Understanding an open-source project</h2>
<p>Many, but not all, open-source projects are on <a href="https://github.com">github.com</a> or <a href="https://gitlab.com">gitlab.com</a>. On github.com, every repo contains a tab called Insights, from where you can see information on the people who contributed lines of code to a project. Of a particular interest might be the Contributor tab within Insights, an example screenshot of the <code>dplyr</code> R package contributor page is in <a href="#fig-dplyr">Figure&nbsp;<span>2.1</span></a>.</p>
<p>Some sites like <a href="http://openpharma.pharmaverse.org">openpharma.pharmaverse.org</a> (specific to R and python packages in pharma) and <a href="https://ossinsight.io/">OSS Insights</a>; powerful tool for any project on GitHub) also provide more specific insights into the community engagement behind each project hosted on <a href="https://github.com/">github.com</a>.</p>
<div id="fig-dplyr" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="assets/ghdplyr.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;2.1: Screenshot from Insight tab for the <code>dplyr</code> R package</figcaption>
</figure>
</div>
<section id="the-community-behind-a-project" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="the-community-behind-a-project"><span class="header-section-number">2.2.1</span> The community behind a project</h3>
<p>The activity on a project alone does not tell you the quality and extent of use of a project. Two examples are:</p>
<ul>
<li>A project could have almost no active community in terms of recent contributions or response to issues, much like the R package <a href="https://github.com/therneau/survival"><code>survival</code></a>, yet be a stable and critical package in R installations.</li>
<li>A project could also have no activity as it has been abandoned after or before it reached v1.0.</li>
</ul>
<p>The community behind a project is also not limited to the people that contribute code. Users can also engage with a project via giving feedback via mechanisms like GitHub issues, emailing authors or engaging in discussions on GitHub issues. <a href="#fig-teal">Figure&nbsp;<span>2.2</span></a> is an example of an issue page for the teal R package. The figure shows that teal has 24 open issues, and 266 closed issues. Small speech bubbles on the right of the figure show discussion have occurred on some issues.</p>
<div id="fig-teal" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="assets/teal.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;2.2: An example screenshot of the R package teal’s issue page</figcaption>
</figure>
</div>
<p>By looking through issues, subjective impressions on community health can be made. Is it a few people giving feedback and one person developing? Does it have stale issues no-one replies to? Or does it have a lively community engaged in discussion and coordination?</p>
<p>Packages can also be open sourced without having the place they develop the code exposed to the general public. An example is the <a href="https://www.stat.berkeley.edu/~breiman/RandomForests/"><code>randomForest</code></a> package, which is an open sourced (GPL-2/3) R package where the source code of the releases is open sourced for use, but the package authors do not give users access to view the place where they develop code. This does not mean the quality of the code is inferior, but does indicate there is an additional barrier to engaging with the package development as the first step would be to contact the authors.</p>
<p>Some things to consider when trying to establish the activity of a community are:</p>
<ul>
<li>How many individuals contributed to the project?</li>
<li>What is the spread in contributions? What is the size of the ‘core’ group that contribute the majority of the code? What is the spread of commits—is it highly skewed to 1 or 2 people contributing?</li>
<li>What is the recent and trends in commit activity? Is it currently active, formerly or is yet to become active?</li>
<li>How many open and closed issues are there? If it’s a low number, is that in line with the age and expected use of the project?</li>
<li>Are there ‘stale’ open issues, where issues remain open for months or years? Are many of these stale issues with comments, suggesting some discussion, or absent of comments suggesting there is no feedback loop present between issues and the codebase? A thing to also look for is whether closed issues are resolved, as some projects use bots to automatically close stale issues.</li>
</ul>
</section>
</section>
<section id="finding-open-source-projects" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="finding-open-source-projects"><span class="header-section-number">2.3</span> Finding open-source projects</h2>
<p>Numerous methods exist to find projects. Specific to R projects, the following sources exist:</p>
<ul>
<li><p><a href="http://pharmaverse.org">pharmaverse.org</a>: opinionated/curated effort to provide end-to-end tools for clinical reporting.</p></li>
<li><p><a href="http://openpharma.pharmaverse.org">openpharma.pharmaverse.org</a>: un-opinionated tracker of packages built by pharma for pharma use cases. It also and indexes and provides package metadata in a dashboard, and provides metadata to pharmaverse.org.</p></li>
<li><p>The <a href="https://r-universe.dev/search/">R universe</a> hosts ecosystems of packages in CRAN-like repositories. As an example, the pharmaverse has the ‘bleeding edge’ of the main branches of all included R package available as a <a href="https://pharmaverse.r-universe.dev/builds">CRAN-like repository</a>.</p></li>
<li><p><a href="http://rseek.org">rseek.org</a>: Google filter for R relevant content.</p></li>
<li><p><a href="http://rinpharma.com/publication">rinpharma.com/publication</a>: the proceedings of the R/Pharma conference contain many relevant projects.</p></li>
<li><p><a href="https://ropensci.org/packages/all/">ROpenSci</a>: maintains a list of packages they have vetted through their software review process, and they also <a href="https://ropensci.org/packages/">categorise the packages by domain</a>.</p></li>
</ul>
</section>
<section id="balancing-extending-vs-creating" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="balancing-extending-vs-creating"><span class="header-section-number">2.4</span> Balancing extending vs creating</h2>
<p>Using R packages as an example, if your analysis plan requires creating a Kaplan-Meier plot, you could implement this using open code you program using R base plotting functions. Alternatively, you could introduce a dependency on a package that provides that functionality as a parameterised function, like <a href="https://github.com/kassambara/survminer/"><code>survminer</code></a>, <a href="https://github.com/openpharma/visR/"><code>visR</code></a> or <a href="https://github.com/insightsengineering/tern/"><code>tern</code></a>. Occasionally an existing package may be missing a feature you want, as can be derived from the presence of at least 3 R packages with a Kaplan-Meier plotting function. In such cases, you may need to extend, or start a new package.</p>
<p>When an existing tool is not a perfect fit, it can be difficult to decide whether to extend an existing package, or whether it may be worth starting a new one. Some resources to help understand how to contribute to a new package are:</p>
<ul>
<li>A <a href="https://www.tidyverse.org/blog/2017/08/contributing/">blog post by Jim Hester on contributing to the tidyverse</a></li>
<li>Many packages have a CONTRIBUTING.md file, or mention in the README.md, how you can contribute. They may also be a dedicated tag for issues discussing new features (e.g.&nbsp;<code>'enhancements'</code>).</li>
</ul>
</section>
<section id="understanding-the-risks-of-using-open-source" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="understanding-the-risks-of-using-open-source"><span class="header-section-number">2.5</span> Understanding the risks of using open-source</h2>
<p>Risk can come from several domains including;</p>
<ul>
<li>Security, e.g.&nbsp;it has malicious code or inadvertently opens vulnerability.</li>
<li>Quality, the package has poor documentation and code is unreliable.</li>
<li>Accuracy, the package does not correctly reference what it does, or implements it incorrectly.</li>
</ul>
<p>The <a href="https://pharmar.org">R validation hub</a> is a pan-pharma organisation, that aims to coordinate between pharma companies how the validation (and by extension risk assessment) in R packages is undertaken and documented. Of particular relevance is the <a href="https://github.com/pharmaR/case_studies">Case Studies repository</a>, which contains examples from Roche, Merck and Novartis (as of January 2023) on how they approach validation and risk mitigation. The R Validation Hub also created <a href="https://www.pharmar.org/risk/"><code>riskmetric</code></a> as a tool to extract metrics relevant to validation, and is continuing work on the <a href="https://github.com/pharmaR/risk_assessment">Risk Assessment App</a>, which aims to provide an application that will surface these metrics to a user to help evaluate an R package.</p>
<p>A potentially critical future resource is also the R Validation Hub’s regulatory R package working group. <a href="https://pharmar.github.io/regulatory-r-repo-wg/">This group</a> has the following goal:</p>
<blockquote class="blockquote">
<p>This working group strives to identify and prototype at least one technical framework that can support a transparent, open, dynamic, cross-industry approach of establishing and maintaining a ‘repository’ of R packages with accompanying evidence of their quality and the assessment criteria, that can be used to simplify necessary in-house validation processes as much as possible.</p>
</blockquote>
<section id="tools-that-help-document-risk-in-r-packages" class="level3" data-number="2.5.1">
<h3 data-number="2.5.1" class="anchored" data-anchor-id="tools-that-help-document-risk-in-r-packages"><span class="header-section-number">2.5.1</span> Tools that help document risk in R packages</h3>
<p>Two toolsets have been released specifically for R packages, which differ in their underlying philosophy.</p>
<ul>
<li>Roche has also open sourced a github-action called <a href="https://github.com/marketplace/actions/r-package-validation-report">thevalidatoR, which is available on Github Marketplace</a>, which will generate a PDF with the unit testing results, as well as a traceability matrix of documentation against tested functionality in a specified container. The core belief in this approach is that a package that is well documented with Roxygen tags and <code>testthat</code> unit tests provides the necessary information to validate a package implements it’s documented features.</li>
<li><a href="https://phuse-org.github.io/valtools/index.html"><code>valtools</code></a> from Fred Hutchinson Cancer Center places the logic for the validation documentation within the R package as a vignette, where the user manually adds the requirements and test cases.</li>
</ul>
<p>The two approaches differ in their stance on what information should be added to a package vs already exists, but ultimately both aim to capture information that can be used to create necessary evidence for validation.</p>
<p>The <a href="https://github.com/sonatype-nexus-community/oysteR"><code>oysteR</code></a> R package can help scan R projects for known vulnerabilities via a REST API interface into the vendor tool <em>OSS Index</em> from <em>sonatype</em>.</p>
</section>
</section>
<section id="the-impact-of-different-licences" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="the-impact-of-different-licences"><span class="header-section-number">2.6</span> The impact of different licences</h2>
<p>The licence of projects you depend on, particularly if you incorporate the source code into your compiled/shared product, can have drastic effects on what you can do with your project. It is always important to seek in-house counsel advice on your companies position on different licence types.</p>
<p>As a general guidance:</p>
<ul>
<li>There are permissive licences that allow people to use a project in almost any way, through to copy-left licences that prevent distributing and, in some cases, monetizing any project that incorporates the dependency into its codebase.</li>
<li>Two key resources to understand licence types are <a href="https://choosealicense.com/" class="uri">https://choosealicense.com/</a> and <a href="https://opensource.org/licenses" class="uri">https://opensource.org/licenses</a>.</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./why.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Open source: the what and why</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./releasing.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Releasing open source</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>